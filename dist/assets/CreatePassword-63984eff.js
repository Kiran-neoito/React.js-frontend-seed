import{_ as p,u as k,e as E,a as F,f as d,b as v,L as S}from"./index-29587d46.js";import{r,j as e,a as n,F as m}from"./jsx-runtime-9fe3b506.js";import{F as C}from"./formik.esm-b0ac15df.js";import{v as I,C as M,L as T,P as O,r as R}from"./PulseLoader-c27a858d.js";const $=r.lazy(()=>p(()=>import("./PasswordInput-84e06d94.js"),["assets/PasswordInput-84e06d94.js","assets/index-29587d46.js","assets/jsx-runtime-9fe3b506.js","assets/index-d96369d3.css"])),j=r.lazy(()=>p(()=>import("./InputBox-19a4600a.js"),["assets/InputBox-19a4600a.js","assets/jsx-runtime-9fe3b506.js","assets/formik.esm-b0ac15df.js"])),z=r.lazy(()=>p(()=>import("./LoginLayout-a42d0ace.js"),["assets/LoginLayout-a42d0ace.js","assets/jsx-runtime-9fe3b506.js","assets/index-29587d46.js","assets/index-d96369d3.css"])),q=()=>{const i=r.useRef(null),l=k(),[u,x]=r.useState(""),[o,w]=r.useState(!1),[h,y]=r.useState(""),[c]=E();F({queryKey:["auth","verify-reset",{token:c.get("token")}],queryFn:()=>{if(c.get("token"))return I({id:c.get("token")??""});l(d)},onError:()=>l(d)});const{mutate:b,isLoading:f}=v({mutationFn:R,onSuccess:s=>{y(s.data.message),setTimeout(()=>l(d),5e3)},onError:s=>{var a,t;(t=(a=s.response)==null?void 0:a.data)!=null&&t.message&&x(s.response.data.message)}}),_={password:"",confirmPassword:""},N=s=>b({...s,token:c.get("token")??""}),P=s=>{s.password===s.confirmPassword?w(!0):w(!1)},L=s=>{var a;(a=i==null?void 0:i.current)==null||a.setFieldTouched("confirmPassword"),P(s)};return e(C,{innerRef:i,initialValues:_,onSubmit:N,validationSchema:M,children:({handleSubmit:s,values:a,errors:t,touched:g})=>e(z,{children:n("div",{className:"w-[37.5%] max-w-xl h-screen flex flex-col justify-center bg-white rounded-5 p-10",children:[e("img",{src:T,alt:"logo",className:"mb-3 w-15"}),h.length?n(m,{children:[e("p",{className:"text-xl leading-6 font-normal opacity-70 mb-6",children:h}),e(S,{to:d,className:"text-primary text-xl font-medium leading-6 underline",children:"Login"}),e("p",{className:"text-xl leading-6 font-normal opacity-70 mt-2",children:"Or you will be redirected in 5 seconds"})]}):n(m,{children:[e("p",{className:"auth-head mb-7",children:"Create New Password"}),e("div",{className:`${t.password&&g.password?"mb-1":"mb-6"}`,children:e($,{name:"password",placeholder:"New Password",type:"password",onKeyUp:()=>P(a)})}),n("div",{className:`${t.confirmPassword&&g.confirmPassword?"mb-1":"mb-6"}`,children:[e(j,{name:"confirmPassword",placeholder:"Confirm New Password",type:"password",onKeyUp:()=>L(a)}),!t.confirmPassword&&a.password?e(m,{children:n("div",{className:`text-left text-sm first-letter:uppercase bg-white py-1 ${!o&&"text-error"} ${o&&"text-success"}`,children:[o?"Password Match!":null,o?null:"Password Mismatch!"]})}):null]}),n("div",{className:"relative",children:[u?e("div",{className:"text-error text-left text-sm first-letter:uppercase bg-white py-1",children:u}):null,e("button",{onClick:()=>{a.password&&a.confirmPassword&&!t.password&&!t.confirmPassword&&o&&s()},type:"submit",disabled:f,className:`primary-btn btn w-full h-11 ${!a.password&&!a.confirmPassword||t.password||t.confirmPassword||!o?"disabled-btn":""} `,children:f?e(O,{size:10,color:"#FFF"}):"Change Password"})]})]})]})})})};export{q as default};
