import{a as t,j as e,r as c,F as C}from"./jsx-runtime-9fe3b506.js";import{h as S,i as A,E,D as _,j as P,k as j,L as M,C as L,P as F,a as R,M as D}from"./index-29587d46.js";import T from"./CreateMultiAutomotiveInsurance-be08a113.js";import{g as H}from"./automotive-insurance-a209c6c9.js";import"./index-6e04f018.js";const I="/assets/Add-2301119a.svg",O="/assets/calendar-2669f5bb.svg",q=({insurance:s,handleInsuranceTypes:d,insuranceTypes:r,onDelete:i})=>(S.extend(A),t("div",{className:`flex items-center cursor-pointer justify-between py-3 rounded  ${r!=null&&r.includes(s.policy_number)?"bg-[#F6F6F6]":"bg-white"}`,children:[t("div",{className:"form-check flex items-center",children:[e("input",{type:"checkbox",className:`accent-primary-gray  w-[17px] h-[17px] mr-3 rounded-sm border
            border-gray-300 `,id:s.policy_number,onChange:l=>d(l,s.policy_number)}),t("label",{className:"form-check-label  inline-block text-gray-800 ",htmlFor:s.policy_number,children:[e("p",{className:"text-base font-medium mt-2",children:s.policy_number}),t("p",{className:"text-xs opacity-40",children:["Last updated ",S(s.updated_at).fromNow()]})]}),e("p",{className:"ml-6 text-sm bg-green-600 font-medium h-8 pt-[5px] px-2 text-white rounded",children:s.risk_score})]}),t("div",{className:"flex gap-2.5 items-center",children:[e("div",{className:"hi-list-icon",children:e("img",{src:E,alt:"view"})}),e("div",{className:"hi-list-icon",children:e("img",{src:_,alt:"download"})}),e("div",{className:"hi-list-icon",onClick:()=>i(s.policy_number),children:e("img",{src:P,alt:"delete"})})]})]},s.id)),z=({setPage:s,setSearchTerm:d,searchTerm:r,data:i,page:l,isLoading:b,insuranceTypes:m,handleInsuranceTypes:x})=>{var v,y;const[u,f]=c.useState(""),[N,h]=c.useState(!1),n=c.useRef(null),g=()=>{var o,w;(o=n.current)!=null&&o.value&&d((w=n.current)==null?void 0:w.value)},p=()=>{h(!0)},k=o=>{!o.target.value.length&&r.length&&d("")},a=(v=i==null?void 0:i.data)==null?void 0:v.data;return t("div",{className:"w-[46.5%] max-w-3xl bg-white mt-3 flex flex-col px-16",children:[!!u.length&&e(j,{onDelete:()=>f(""),onClose:()=>f("")}),N&&e(T,{onDelete:()=>h(!1),onClose:()=>h(!1)}),b?e(C,{children:"Loading.."}):t(C,{children:[t("div",{className:"flex justify-end gap-3",children:[t("button",{onClick:p,className:"bg-main-blue text-sm rounded-md text-white px-3 py-2 font-medium flex gap-2 items-center",children:[e("img",{src:I,alt:"add"}),e("span",{children:"Multi Route Insurance"})]}),t(M,{to:L,className:"bg-main-blue text-sm rounded-md text-white px-3 py-2 font-medium flex gap-2",children:[e("img",{src:I,alt:"add"}),e("span",{children:"Single Route Insurance"})]})]}),t("div",{className:"my-5 flex flex-1 flex-col w-full",children:[e("p",{className:"text-xl font-medium",children:"All Automotive Insurances (6)"}),t("div",{className:"my-5 border  border-solid border-main-blue px-2.5 h-14 rounded-lg flex items-center gap-3",children:[e("input",{className:"text-base font-medium border-none focus:outline-none flex-1",placeholder:"DDMMYY-HI-LOC-SH-00000",ref:n,onChange:k}),e("button",{className:"bg-gray-variant-3 h-8 w-8 flex justify-center items-center text-white rounded-md",onClick:p,children:e("img",{src:O,alt:"calendar"})}),e("button",{className:"bg-primary-gray h-8 flex justify-center items-center px-5 text-white rounded-md",onClick:g,children:"Search"})]}),t("div",{className:"flex-1",children:[!!r.length&&t("p",{className:"font-medium text-base my-10",children:["Showing"," ",t("span",{className:"underline",children:[a==null?void 0:a.totalCount," policies"]})]}),(y=a==null?void 0:a.data)==null?void 0:y.map(o=>e(q,{handleInsuranceTypes:x,insuranceTypes:m,insurance:o,onDelete:f},o.id))]})]}),(a==null?void 0:a.totalPages)<=1?null:e(F,{page:l,totalPages:a==null?void 0:a.totalPages,nextPage:()=>s(l+1),previousPage:()=>s(l-1)})]})]})},Q=()=>{var h;const[s,d]=c.useState(""),[r,i]=c.useState(15),[l,b]=c.useState(1),[m,x]=c.useState([]),{data:u,isLoading:f}=R({queryKey:["auto-insr",l],keepPreviousData:!0,queryFn:()=>H({page:l,limit:10})});return t("div",{className:" inset-0 w-full h-screen z-0 flex",children:[e(z,{handleInsuranceTypes:(n,g)=>{n.target.checked?x([...m,g]):x(m.filter(function(p){return p!=g}))},insuranceTypes:m,setPage:n=>b(n),setSearchTerm:n=>d(n),page:l,searchTerm:s,data:u,isLoading:f}),e(D,{tileSelectionEnable:!0,gridEnable:!0,insuranceTypes:m,insurances:(h=u==null?void 0:u.data)==null?void 0:h.data,zoom:r,setZoom:n=>i(n)})]})};export{Q as default};
